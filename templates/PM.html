{% extends "base.html" %}

{% block title %}Project Management{% endblock %}

{% block content %}
    <h1>Project Management</h1>
    
    <!-- Project Form -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Add New Project</h5>
            <form action="{{ url_for('views.add_project') }}" method="POST">
                <div class="mb-3">
                  <label>Date Started</label>
                  <input type="date" name="date_started" class="form-control" required>
                </div>
          
                <div class="mb-3">
                  <label>Date Ended</label>
                  <input type="date" name="date_ended" class="form-control">
                </div>
          
                <div class="mb-3">
                  <label>Budget</label>
                  <input type="number" step="0.01" name="budget" class="form-control" required>
                </div>
          
                <div class="mb-3">
                  <label>Department ID</label>
                  <input type="number" name="department_id" class="form-control" required>
                </div>
          
                <button type="submit" class="btn btn-primary">Add Project</button>
              </form>
            </div>
          </div>
          
    <!-- Project List -->
    <h2>Current Projects</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Project ID</th>
                <th>Date Started</th>
                <th>Date Ended</th>
                <th>Budget</th>
                <th>Department ID</th>
                <th>Members</th>
                <th>Actions</th>
            </tr>
            </tr>
        </thead>
        <tbody>
            {% for project in projects %}
            <tr>
                <td>{{ project.project_number }}</td>
                <td>{{ project.date_started }}</td>
                <td>{{ project.date_ended }}</td>
                <td>{{ project.budget }}</td>
                <td>{{ project.department_id }}</td>
        
               

    <td>
        {% for employee in employees %}
            {% if employee.project_number == project.project_number %}
                {{ employee.employee_name }}<br>
            {% endif %}
        {% endfor %}
    </td>

                     <!-- Edit Button -->
    <td><a
    href="{{ url_for('views.edit_project', project_number=project.project_number) }}"
    class="btn btn-sm btn-warning">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>


</td>
{% endblock %}

<!-- This page is where project management allows you to create and view existing projects. Also llists memebers for each project -->
